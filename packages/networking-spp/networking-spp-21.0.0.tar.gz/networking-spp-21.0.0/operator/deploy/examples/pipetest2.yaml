apiVersion: spp.spp/v1
kind: Spp
metadata:
  name: pipetest2
spec:
  ctl:
    name: ctl
    image: sppc/spp-ctl:18.04
  primary:
    name: primary
    image: sppc/spp-ubuntu:18.04
    eal:
      lcores: "1"
      socket-mem: "1024"
    portmask: "0x07"
  nfvs:
    - name: nfv:1
      image: sppc/spp-ubuntu:18.04
      eal:
        lcores: "2,3"
        socket-mem: "1024"
      vhost: "client"
      resources: ["vhost:1", "vhost:2"]
      patches:
        - src: "vhost:1"
          dst: "vhost:2"
        - src: "vhost:2"
          dst: "vhost:1"
  apps:
    - name: pipe:1
      image: sppc/spp-ubuntu:18.04
      command: ["pipe_test"]
      args: ["virtio_user1"]
      type: "vhost"
      eal:
        lcores: "4"
        vdevs: [["virtio_user1", "path=/tmp/sock1,server=1"]]
    - name: pipe:2
      image: sppc/spp-ubuntu:18.04
      command: ["pipe_test"]
      args: ["--send virtio_user2"]
      type: "vhost"
      eal:
        lcores: "5"
        vdevs: [["virtio_user2", "path=/tmp/sock2,server=1"]]
