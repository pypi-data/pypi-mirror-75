(this.webpackJsonppytest_web_ui=this.webpackJsonppytest_web_ui||[]).push([[0],{122:function(e,t){},134:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(59),r=n.n(l),s=n(68),o=n(60),i=n(61),u=n(18),d=n(67),m=n(69),h=n(62),f=n.n(h),p=n(63),g=n.n(p),b=n(12),E=n(13),v=n(3),y=n(64),k=n.n(y),j=n(135),w=n(136),R=n(14),T=n(15),O=function(e){return e.selectedBranch?c.a.createElement("div",{className:Object(v.b)(N.navColumn)},c.a.createElement(j.a,null,c.a.createElement(B,{selectedBranch:e.selectedBranch,selection:e.selection,handleTestRun:e.handleTestRun}),c.a.createElement(x,{selectedBranch:e.selectedBranch,handleTestRun:e.handleTestRun,selectedLeafID:e.selectedLeafID}))):c.a.createElement("div",{className:Object(v.b)(N.navColumn)})},B=function(e){var t=Object.keys(e.selectedBranch.child_branches);return c.a.createElement(c.a.Fragment,null,t.map((function(t){var n=e.selectedBranch.child_branches[t];return c.a.createElement(w.a,{key:t,className:Object(v.b)(D(n.status),N.navEntryCommon)},c.a.createElement("span",{className:Object(v.b)(N.navLabel)},c.a.createElement(b.b,{to:e.selection.concat([t]).map(encodeURIComponent).join("/")},t)),c.a.createElement(L,{nodeid:n.nodeid,status:n.status,handleTestRun:e.handleTestRun}))})))},x=function(e){var t=Object.keys(e.selectedBranch.child_leaves);return c.a.createElement(c.a.Fragment,null,t.map((function(t){var n=t===e.selectedLeafID?t:c.a.createElement(b.b,{to:"?selectedLeaf=".concat(encodeURIComponent(t))},t),a=e.selectedBranch.child_leaves[t];return c.a.createElement(w.a,{key:t,className:Object(v.b)(D(e.selectedBranch.child_leaves[t].status),N.navEntryCommon)},c.a.createElement("span",{className:Object(v.b)(N.navLabel)},n),c.a.createElement(L,{nodeid:a.nodeid,status:a.status,handleTestRun:e.handleTestRun}))})))},L=function(e){switch(e.status){case"running":return c.a.createElement(R.a,{icon:T.d,spin:!0});default:return c.a.createElement(R.a,{icon:T.c,onClick:function(t){t.stopPropagation(),e.handleTestRun(e.nodeid)},className:Object(v.b)(N.runButton)})}},D=function(e){switch(e){case"passed":return N.navEntryPassed;case"failed":return N.navEntryFailed;default:return N.navEntryDefault}},N=v.a.create({navColumn:{height:"100%",width:"25em",position:"fixed","z-index":1,top:0,left:0,"overflow-x":"hidden",padding:"20px",background:"#F3F3F3"},navLabel:{"text-overflow":"ellipsis","white-space":"nowrap",fontSize:"small","max-width":"90%"},runButton:{cursor:"pointer",color:"black",transition:"color 0.3s ease-out 0s",":hover":{color:"#F3F3F3"}},navEntryPassed:{background:"#c0ffbf"},navEntryFailed:{background:"#ff7a7a"},navEntryDefault:{background:"#D0D0D0"},navEntryCommon:{display:"flex","justify-content":"space-between","align-items":"center"}}),C=n(137),I=n(138),F=function(e){return e.selectedLeaf?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement("span",{className:Object(v.b)(U.title)},e.selectedLeaf.nodeid),c.a.createElement("span",{className:Object(v.b)(U.statusIcon)},P(e.selectedLeaf.status))),c.a.createElement("pre",{className:Object(v.b)(U.longrepr)},e.selectedLeaf.longrepr)):c.a.createElement(_,{message:"Please select a test."})},_=function(e){return c.a.createElement("h1",{className:Object(v.b)(U.message)},e.message)},P=function(e){switch(e){case"passed":return c.a.createElement(R.a,{icon:T.a,color:"green",size:"4x"});case"failed":return c.a.createElement(R.a,{icon:T.e,color:"red",size:"4x"});default:return null}},S=function(e){var t=e.selection.length;if(!t)return c.a.createElement(C.a,null,c.a.createElement(I.a,{key:"home"},c.a.createElement(R.a,{icon:T.b})));var n=e.selection[t-1],a=e.selection.slice(0,t-1);return c.a.createElement(C.a,null,c.a.createElement(I.a,{key:"home"},c.a.createElement(b.b,{to:"/"},c.a.createElement(R.a,{icon:T.b}))),a.map((function(t,n){return c.a.createElement(I.a,{key:t},c.a.createElement(b.b,{to:"/"+e.selection.slice(0,n+1).map(encodeURIComponent).join("/")},t))})),c.a.createElement(I.a,null,n))},U=v.a.create({title:{fontSize:"large","font-weight":"bold","text-overflow":"ellipsis","white-space":"nowrap",padding:"10px"},statusIcon:{float:"right"},longrepr:{padding:"10px"},message:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",minHeight:"80vh",color:"#D0D0D0"}}),z=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={resultTree:null,loading:!1,socket:null,errorMessage:null},a.handleUpdate=a.handleUpdate.bind(Object(u.a)(a)),a.handleTestRun=a.handleTestRun.bind(Object(u.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=g()();this.setState({loading:!0,socket:t},(function(){t.on("update",e.handleUpdate),e.getResultTree()}))}},{key:"getResultTree",value:function(){var e=this;f.a.get("/api/v1/result-tree").then((function(t){e.setState({resultTree:t.data,loading:!1})})).catch((function(t){e.setState({loading:!1,errorMessage:String(t)})}))}},{key:"handleUpdate",value:function(e){console.log("Handling websocket update"),console.log(e);var t=this.state.resultTree;t&&this.setState((function(n){return{resultTree:H(t,e)}}))}},{key:"handleTestRun",value:function(e){this.state.socket?this.state.socket.emit("run test",e):console.log("Socket connection not yet established")}},{key:"render",value:function(){var e=M(this.props.url);if(this.state.loading)return c.a.createElement(W,{message:"Loading...",selection:e});if(this.state.errorMessage)return c.a.createElement(W,{message:this.state.errorMessage,selection:e});var t=A(e,this.state.resultTree);return t?c.a.createElement(J,{selectedBranch:t,selection:e,handleTestRun:this.handleTestRun}):c.a.createElement(W,{message:"404 Page Not Found",selection:e})}}]),n}(c.a.Component),M=function(e){var t=e.replace(/^\/+|\/+$/g,"");return 0===t.length?[]:t.split("/").map(decodeURIComponent)},H=function(e,t){var n=Object(s.a)({},e);return k.a.merge(n,t),n},J=function(e){var t=$().get("selectedLeaf"),n=t&&e.selectedBranch?e.selectedBranch.child_leaves[t]:null;return c.a.createElement("div",null,c.a.createElement(O,{selectedBranch:e.selectedBranch,selectedLeafID:t,selection:e.selection,handleTestRun:e.handleTestRun}),c.a.createElement("div",{className:Object(v.b)(q.centrePane)},c.a.createElement(S,{selection:e.selection}),c.a.createElement(F,{selectedLeaf:n})))},W=function(e){return c.a.createElement("div",null,c.a.createElement(O,{selectedBranch:null,selectedLeafID:null,selection:[],handleTestRun:function(e){}}),c.a.createElement("div",{className:Object(v.b)(q.centrePane)},c.a.createElement(S,{selection:e.selection}),c.a.createElement(_,{message:e.message})))},$=function(){return new URLSearchParams(Object(E.e)().search)},A=function(e,t){if(t){var n=e.reduce((function(e,t){return null===e||void 0===e?void 0:e.child_branches[t]}),t);return n||(console.log(e),null)}return null},q=v.a.create({centrePane:{"margin-left":"25em",padding:"10px 10px"}}),G=function(){return c.a.createElement(b.a,null,c.a.createElement(E.a,{path:"/",render:function(e){var t=e.location;return c.a.createElement(z,{url:t.pathname})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(133);r.a.render(c.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,n){e.exports=n(134)}},[[71,1,2]]]);
//# sourceMappingURL=main.030fc640.chunk.js.map